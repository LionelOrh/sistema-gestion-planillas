<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Licencias</title>
    <link rel="stylesheet" href="licencias.css">
</head>
<body>
    <!-- Sección principal de licencias -->
    <section class="licencias-gestion">
        <!-- Encabezado -->
        <header class="licencias-header">
            <div class="header-content">
                <div class="header-info">
                    <h1 class="licencias-titulo">Gestión de Licencias</h1>
                    <p class="licencias-subtitulo">Administra vacaciones, permisos y ausencias</p>
                </div>
                <div class="header-actions">
                    <button class="btn-recargar" id="btnRecargarLicencias" title="Recargar licencias">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                        </svg>
                    </button>
                    <button class="btn-nueva-licencia" id="btnNuevaLicencia">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                        </svg>
                        Nueva Solicitud
                    </button>
                </div>
            </div>
        </header>

        <!-- Filtros y búsqueda -->
        <div class="licencias-filtros">
            <div class="search-box">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                </svg>
                <input type="search" placeholder="Buscar por empleado o tipo de licencia..." 
                       class="search-input" id="searchLicencias">
            </div>
            
            <div class="filtros-estados">
                <button class="filtro-estado active" data-estado="todos">Todos</button>
                <button class="filtro-estado" data-estado="PENDIENTE">
                    <span class="badge-pendiente">●</span> Pendiente
                </button>
                <button class="filtro-estado" data-estado="ACTIVA">
                    <span class="badge-activa">●</span> Activa
                </button>
                <button class="filtro-estado" data-estado="CONCLUIDA">
                    <span class="badge-concluida">●</span> Concluida
                </button>
                <button class="filtro-estado" data-estado="CANCELADA">
                    <span class="badge-cancelada">●</span> Cancelada
                </button>
            </div>
        </div>

        <!-- Grid de tarjetas de licencias -->
        <div class="licencias-grid" id="licenciasGrid">
            <!-- Las tarjetas se cargarán dinámicamente aquí -->
            <div class="loading-licencias">
                <div class="spinner"></div>
                <p>Cargando licencias...</p>
            </div>
        </div>

        <!-- Mensaje cuando no hay resultados -->
        <div class="no-results" id="noResults" style="display: none;">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/>
            </svg>
            <h3>No se encontraron licencias</h3>
            <p>Intenta ajustar los filtros o crear una nueva solicitud</p>
        </div>
    </section>

    <!-- Modal para crear/editar licencia -->
    <div id="modalLicencia" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Nueva Solicitud de Licencia</h2>
                <button class="modal-close" id="btnCerrarModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                    </svg>
                </button>
            </div>
            
            <form id="formLicencia" class="modal-body">
                <div class="form-group">
                    <label for="selectTrabajador">Empleado *</label>
                    <select id="selectTrabajador" name="idTrabajador" required>
                        <option value="">Selecciona un empleado...</option>
                        <!-- Se cargarán dinámicamente -->
                    </select>
                </div>

                <div class="form-group">
                    <label for="selectTipoLicencia">Tipo de Licencia *</label>
                    <select id="selectTipoLicencia" name="idTipoLicencia" required>
                        <option value="">Selecciona el tipo...</option>
                        <!-- Se cargarán dinámicamente -->
                    </select>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="fechaInicio">Fecha de Inicio *</label>
                        <input type="date" id="fechaInicio" name="fechaInicio" required>
                    </div>
                    <div class="form-group">
                        <label for="fechaFin">Fecha de Fin *</label>
                        <input type="date" id="fechaFin" name="fechaFin" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="diasCalculados">Duración (días)</label>
                    <input type="number" id="diasCalculados" name="dias" readonly 
                           placeholder="Se calculará automáticamente">
                </div>

                <div class="form-group">
                    <label for="selectEstado">Estado</label>
                    <select id="selectEstado" name="estado">
                        <option value="PENDIENTE">Pendiente</option>
                        <option value="ACTIVA">Activa</option>
                        <option value="CONCLUIDA">Concluida</option>
                        <option value="CANCELADA">Cancelada</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="textareaMotivo">Motivo</label>
                    <textarea id="textareaMotivo" name="motivo" rows="3" 
                              placeholder="Describe el motivo de la licencia..."></textarea>
                </div>
            </form>

            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="btnCancelarModal">Cancelar</button>
                <button type="submit" class="btn-primary" id="btnGuardarLicencia">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación -->
    <div id="modalConfirmacion" class="modal" style="display: none;">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="confirmacionTitle">Confirmar Acción</h2>
            </div>
            <div class="modal-body">
                <p id="confirmacionMensaje">¿Estás seguro de realizar esta acción?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="btnCancelarConfirmacion">Cancelar</button>
                <button type="button" class="btn-primary" id="btnConfirmarAccion">Confirmar</button>
            </div>
        </div>
    </div>

    <script src="licencias.js"></script>
</body>
</html>
